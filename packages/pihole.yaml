# Pi-hole DNS Filtering Integration
# Controls dayBlock group filtering

shell_command:
  pihole_login: "bash /config/shell_scripts/pihole/pihole_login.sh"
  pihole_enable_dayblock: "bash /config/shell_scripts/pihole/pihole_enable_dayblock.sh"
  pihole_disable_dayblock: "bash /config/shell_scripts/pihole/pihole_disable_dayblock.sh"

rest_command:
  pihole_enable_dayblock:
    url: "http://10.0.0.162/api/groups/dayBlock"
    method: PUT
    headers:
      X-FTL-CSRF: "{{ states('sensor.pi_hole_csrf') }}"
      X-FTL-SID: "{{ states('sensor.pi_hole_sid') }}"
      Cookie: "sid={{ states('sensor.pi_hole_sid') }}"
      Content-Type: "application/json"
    payload: >
      {
        "name": "dayBlock",
        "enabled": true
      }

  pihole_disable_dayblock:
    url: "http://10.0.0.162/api/groups/dayBlock"
    method: PUT
    headers:
      X-FTL-CSRF: "{{ states('sensor.pi_hole_csrf') }}"
      X-FTL-SID: "{{ states('sensor.pi_hole_sid') }}"
      Cookie: "sid={{ states('sensor.pi_hole_sid') }}"
      Content-Type: "application/json"
    payload: >
      {
        "name": "dayBlock",
        "enabled": false
      }
