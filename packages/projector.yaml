# Projector Profile Management
# REST commands to control projector profiles via Mac Mini API

# Template sensor to detect projector state based on power consumption
template:
  - binary_sensor:
      - name: "Projector Status"
        unique_id: projector_status_power_based
        device_class: power
        state: >
          {{ states('sensor.sonoff_100267c292_power') | float(0) > 50 }}
        availability: >
          {{ states('sensor.sonoff_100267c292_power') not in ['unknown', 'unavailable'] }}
        attributes:
          friendly_name: "Projector"
          power_draw: "{{ states('sensor.sonoff_100267c292_power') }} W"

rest_command:
  projector_profile_default:
    url: "http://jamess-mac-mini.local:3001/api/profile"
    method: POST
    headers:
      Content-Type: application/json
    payload: >
      {
        "profile": "default"
      }

  projector_profile_work:
    url: "http://jamess-mac-mini.local:3001/api/profile"
    method: POST
    headers:
      Content-Type: application/json
    payload: >
      {
        "profile": "work"
      }

  projector_profile_morning:
    url: "http://jamess-mac-mini.local:3001/api/profile"
    method: POST
    headers:
      Content-Type: application/json
    payload: >
      {
        "profile": "morning"
      }
